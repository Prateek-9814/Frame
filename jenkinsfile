pipeline {
    agent any
    environment {

    DOCKERHUB_CREDENTIALS = credentials('dockerhub')
     registry = "prateek9814/tk-booking1"
        registryCredential = 'dockerhub'
        dockerImage = ''
    }
    stages {
        stage('Building the do docker image') {
            steps {
                sh 'docker build -t prateek9814/tk-booking .'
                echo 'image build completed'
            }
        }
        stage('Logging into dockerhub account') {
            steps {
                sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
            }
        }
        stage('pushing the docker image into dockerhub') {
            steps {
                  sh 'docker push prateek9814/backend-lms1'
            }
        }
    }
}
